"apiVersion": |-
  argoproj.io/v1alpha1
"kind": |-
  Workflow
"metadata":
  "annotations":
    "pipelines.kubeflow.org/pipeline_spec": |-
      {"description": "Shows how to use mlrun with dask and a booster model.", "inputs": [{"default": "[3, 4, 5]", "name": "max_depth", "optional": true}, {"default": "[0.01, 0.1, 0.5]", "name": "learning_rate", "optional": true}], "name": "My Dask training pipeline"}
  "generateName": |-
    my-dask-training-pipeline-
"spec":
  "arguments":
    "parameters":
    - "name": |-
        max_depth
      "value": |-
        [3, 4, 5]
    - "name": |-
        learning_rate
      "value": |-
        [0.01, 0.1, 0.5]
  "entrypoint": |-
    my-dask-training-pipeline
  "serviceAccountName": |-
    pipeline-runner
  "templates":
  - "container":
      "command":
      - |-
        python
      - |-
        -m
      - |-
        mlrun
      - |-
        run
      - |-
        --kfp
      - |-
        --from-env
      - |-
        --workflow
      - |-
        {{workflow.uid}}
      - |-
        --name
      - |-
        acquire
      - |-
        -p
      - |-
        target_path=/User/repos/demos/dask/dataset
      - |-
        -p
      - |-
        name=airlines.pqt
      - |-
        -p
      - |-
        key=airlines
      - |-
        -p
      - |-
        archive_url=https://s3.amazonaws.com/h2o-airlines-unpacked/allyears.csv
      - |-
        -p
      - |-
        dataset=partitions
      - |-
        -p
      - |-
        part_cols=['Year', 'Month']
      - |-
        -p
      - |-
        encoding=latin-1
      - |-
        -p
      - |-
        inc_cols=['Year', 'Month', 'DayofMonth', 'DayOfWeek', 'CRSDepTime', 'UniqueCarrier', 'ArrDelay', 'Origin', 'Dest', 'Distance']
      - |-
        -p
      - |-
        dtype={'Distance': 'float32', 'ArrDelay': 'float64', 'CRSDepTime': 'float32'}
      - |-
        -o
      - |-
        airlines
      - |-
        --handler
      - |-
        arc_to_parquet
      - |-
        --runtime
      - |-
        {'kind': 'job', 'metadata': {'name': 'arc_to_parquet', 'hash': '3867c95680b620953c4087600f6615717d5b6bab', 'project': 'default'}, 'spec': {'command': '/User/repos/demos/dask/code/arc_to_parquet.py', 'args': [], 'image': 'yjbds/mlrun-base:dev', 'volumes': [{'flexVolume': {'driver': 'v3io/fuse', 'options': {'accessKey': 'e0f694b5-7dec-40fe-969e-86a8b9628c23', 'container': 'users', 'subPath': '/admin'}}, 'name': 'v3io'}], 'volume_mounts': [{'mountPath': '/User', 'name': 'v3io'}], 'env': [{'name': 'V3IO_API', 'value': 'v3io-webapi.default-tenant.svc:8081'}, {'name': 'V3IO_USERNAME', 'value': 'admin'}, {'name': 'V3IO_ACCESS_KEY', 'value': 'e0f694b5-7dec-40fe-969e-86a8b9628c23'}], 'description': '', 'build': {'image': 'yjbds/mlrun-base:dev', 'commands': []}}}
      - |-
        --out-path
      - |-
        /User/repos/demos/dask/artifacts
      - |-
        --image
      - |-
        yjbds/mlrun-base:dev
      - ""
      "env":
      - "name": |-
          MLRUN_DBPATH
        "value": |-
          http://mlrun-api:8080
      - "name": |-
          V3IO_API
        "value": |-
          v3io-webapi.default-tenant.svc:8081
      - "name": |-
          V3IO_USERNAME
        "value": |-
          admin
      - "name": |-
          V3IO_ACCESS_KEY
        "value": |-
          e0f694b5-7dec-40fe-969e-86a8b9628c23
      "image": |-
        yjbds/mlrun-dask:dev
      "volumeMounts":
      - "mountPath": |-
          /User
        "name": |-
          v3io
    "name": |-
      acquire
    "outputs":
      "artifacts":
      - "name": |-
          mlpipeline-ui-metadata
        "path": |-
          /mlpipeline-ui-metadata.json
      - "name": |-
          mlpipeline-metrics
        "path": |-
          /mlpipeline-metrics.json
      - "name": |-
          acquire-airlines
        "path": |-
          /tmp/airlines
      "parameters":
      - "name": |-
          acquire-airlines
        "valueFrom":
          "path": |-
            /tmp/airlines
    "volumes":
    - "flexVolume":
        "driver": |-
          v3io/fuse
        "options":
          "accessKey": |-
            e0f694b5-7dec-40fe-969e-86a8b9628c23
          "container": |-
            users
          "subPath": |-
            /admin
      "name": |-
        v3io
  - "container":
      "command":
      - |-
        python
      - |-
        -m
      - |-
        mlrun
      - |-
        deploy
      - |-
        {'kind': 'remote', 'metadata': {'name': 'fdsvr', 'project': 'default'}, 'spec': {'command': '', 'args': [], 'image': '', 'description': '', 'volumes': [{'flexVolume': {'driver': 'v3io/fuse', 'options': {'accessKey': 'e0f694b5-7dec-40fe-969e-86a8b9628c23', 'container': 'users', 'subPath': '/admin'}}, 'name': 'v3io'}], 'volume_mounts': [{'mountPath': '/User', 'name': 'v3io'}], 'env': [{'name': 'MODEL_CLASS', 'value': 'ClassifierModel'}, {'name': 'ENABLE_EXPLAINER', 'value': 'False'}, {'name': 'V3IO_API', 'value': 'v3io-webapi.default-tenant.svc:8081'}, {'name': 'V3IO_USERNAME', 'value': 'admin'}, {'name': 'V3IO_ACCESS_KEY', 'value': 'e0f694b5-7dec-40fe-969e-86a8b9628c23'}], 'config': {'spec.triggers.http': {'kind': 'http', 'maxWorkers': 8, 'attributes': {'ingresses': {}}, 'annotations': {}}}, 'base_spec': {'apiVersion': 'nuclio.io/v1', 'kind': 'Function', 'metadata': {'annotations': {'nuclio.io/generated_by': 'function generated at 19-02-2020 by admin from /User/repos/demos/dask/model_server.ipynb'}, 'labels': {}, 'name': 'fdsvr'}, 'spec': {'build': {'commands': ['python -m pip install -U -q kfserving', 'python -m pip install -U nuclio-sdk==0.0.7', 'python -m pip install -U lightgbm xgboost', 'python -m pip install -U -q git+https://github.com/mlrun/mlrun.git@development'], 'functionSourceCode': 'IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlciBvbiAyMDIwLTAyLTE5IDA5OjI3CgppbXBvcnQga2ZzZXJ2aW5nCmltcG9ydCBvcwppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAoKVEFSR0VUX1BBVEggPSAnL1VzZXIvcmVwb3MvZGVtb3MvZGFzay9hcnRpZmFjdHMnCk1PREVMX0ZJTEUgPSAneGdiLW1vZGVsLnBrbCcKCmNsYXNzIENsYXNzaWZpZXJNb2RlbChrZnNlcnZpbmcuS0ZNb2RlbCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZTogc3RyLCBtb2RlbF9kaXI6IHN0ciwgbW9kZWwgPSBOb25lKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKG5hbWUpCiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQogICAgICAgIHNlbGYubW9kZWxfZGlyID0gbW9kZWxfZGlyCiAgICAgICAgaWYgbm90IG1vZGVsIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuY2xhc3NpZmllciA9IG1vZGVsCiAgICAgICAgICAgIHNlbGYucmVhZHkgPSBUcnVlCgogICAgZGVmIGxvYWQoc2VsZik6CiAgICAgICAgbW9kZWxfZmlsZSA9IG9zLnBhdGguam9pbigKICAgICAgICAgICAga2ZzZXJ2aW5nLlN0b3JhZ2UuZG93bmxvYWQoc2VsZi5tb2RlbF9kaXIpLCBNT0RFTF9GSUxFKQogICAgICAgIHNlbGYuY2xhc3NpZmllciA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKICAgICAgICBzZWxmLnJlYWR5ID0gVHJ1ZQoKICAgIGRlZiBwcmVkaWN0KHNlbGYsIGJvZHkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZmVhdHMgPSBucC5hc2FycmF5KGJvZHlbJ2luc3RhbmNlcyddKQogICAgICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLmNsYXNzaWZpZXIucHJlZGljdChmZWF0cykKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJGYWlsZWQgdG8gcHJlZGljdCAlcyIgJSBlKQoKCmZyb20gbWxydW4ucnVudGltZXMgaW1wb3J0IG51Y2xpb19pbml0X2hvb2sKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIG51Y2xpb19pbml0X2hvb2soY29udGV4dCwgZ2xvYmFscygpLCAnc2VydmluZycpCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICByZXR1cm4gY29udGV4dC5tbHJ1bl9oYW5kbGVyKGNvbnRleHQsIGV2ZW50KQo=', 'noBaseImagesPull': True}, 'env': [{'name': 'MODEL_CLASS', 'value': 'ClassifierModel'}], 'handler': 'model_server:handler', 'runtime': 'python:3.6', 'volumes': []}}, 'source': '', 'function_kind': 'serving'}}
      - |-
        -p
      - |-
        dask
      - |-
        -m
      - |-
        dask_v1={{inputs.parameters.lgbm-lgbm-model}}
      "image": |-
        yjbds/mlrun-dask:dev
    "inputs":
      "parameters":
      - "name": |-
          lgbm-lgbm-model
    "name": |-
      deploy-fdsvr
    "outputs":
      "artifacts":
      - "name": |-
          deploy-fdsvr-endpoint
        "path": |-
          /tmp/output
  - "container":
      "command":
      - |-
        python
      - |-
        -m
      - |-
        mlrun
      - |-
        run
      - |-
        --kfp
      - |-
        --from-env
      - |-
        --workflow
      - |-
        {{workflow.uid}}
      - |-
        --name
      - |-
        lgbm
      - |-
        -p
      - |-
        train_set=('xtrain', 'ytrain')
      - |-
        -p
      - |-
        valid_set=('xvalid', 'yvalid')
      - |-
        -p
      - |-
        target_path=/User/repos/demos/dask/artifacts
      - |-
        -p
      - |-
        name=lgbm-model.pkl
      - |-
        -p
      - |-
        key=lgbm-model
      - |-
        -p
      - |-
        params={'max_depth': 3, 'learning_rate': 0.1, 'n_estimators': 3, 'reg_alpha': 0.0, 'reg_lambda': 0.0, 'random_state': 1, 'tree_learner': 'data', 'silent': False}
      - |-
        -i
      - |-
        dask_client={{inputs.parameters.todask-scheduler}}
      - |-
        -o
      - |-
        lgbm-model
      - |-
        --handler
      - |-
        clf_lgbm_dask
      - |-
        --runtime
      - |-
        {'kind': 'job', 'metadata': {'name': 'clf_lgbm_dask', 'hash': '522464664a8acb99257284aa0c8effe90b104bb0', 'project': 'default'}, 'spec': {'command': '/User/repos/demos/dask/code/clf_lgbm_dask.py', 'args': [], 'image': 'yjbds/mlrun-dask:dev', 'volumes': [{'flexVolume': {'driver': 'v3io/fuse', 'options': {'accessKey': 'e0f694b5-7dec-40fe-969e-86a8b9628c23', 'container': 'users', 'subPath': '/admin'}}, 'name': 'v3io'}], 'volume_mounts': [{'mountPath': '/User', 'name': 'v3io'}], 'env': [{'name': 'V3IO_API', 'value': 'v3io-webapi.default-tenant.svc:8081'}, {'name': 'V3IO_USERNAME', 'value': 'admin'}, {'name': 'V3IO_ACCESS_KEY', 'value': 'e0f694b5-7dec-40fe-969e-86a8b9628c23'}], 'description': '', 'build': {'image': 'yjbds/mlrun-dask:dev', 'commands': []}}}
      - |-
        --out-path
      - |-
        /User/repos/demos/dask/artifacts
      - |-
        --image
      - |-
        yjbds/mlrun-dask:dev
      - ""
      "env":
      - "name": |-
          MLRUN_DBPATH
        "value": |-
          http://mlrun-api:8080
      - "name": |-
          V3IO_API
        "value": |-
          v3io-webapi.default-tenant.svc:8081
      - "name": |-
          V3IO_USERNAME
        "value": |-
          admin
      - "name": |-
          V3IO_ACCESS_KEY
        "value": |-
          e0f694b5-7dec-40fe-969e-86a8b9628c23
      "image": |-
        yjbds/mlrun-dask:dev
      "volumeMounts":
      - "mountPath": |-
          /User
        "name": |-
          v3io
    "inputs":
      "parameters":
      - "name": |-
          todask-scheduler
    "name": |-
      lgbm
    "outputs":
      "artifacts":
      - "name": |-
          mlpipeline-ui-metadata
        "path": |-
          /mlpipeline-ui-metadata.json
      - "name": |-
          mlpipeline-metrics
        "path": |-
          /mlpipeline-metrics.json
      - "name": |-
          lgbm-lgbm-model
        "path": |-
          /tmp/lgbm-model
      "parameters":
      - "name": |-
          lgbm-lgbm-model
        "valueFrom":
          "path": |-
            /tmp/lgbm-model
    "volumes":
    - "flexVolume":
        "driver": |-
          v3io/fuse
        "options":
          "accessKey": |-
            e0f694b5-7dec-40fe-969e-86a8b9628c23
          "container": |-
            users
          "subPath": |-
            /admin
      "name": |-
        v3io
  - "dag":
      "tasks":
      - "name": |-
          acquire
        "template": |-
          acquire
      - "arguments":
          "parameters":
          - "name": |-
              lgbm-lgbm-model
            "value": |-
              {{tasks.lgbm.outputs.parameters.lgbm-lgbm-model}}
        "dependencies":
        - |-
          lgbm
        "name": |-
          deploy-fdsvr
        "template": |-
          deploy-fdsvr
      - "arguments":
          "parameters":
          - "name": |-
              todask-scheduler
            "value": |-
              {{tasks.todask.outputs.parameters.todask-scheduler}}
        "dependencies":
        - |-
          splitter
        - |-
          todask
        "name": |-
          lgbm
        "template": |-
          lgbm
      - "arguments":
          "parameters":
          - "name": |-
              todask-scheduler
            "value": |-
              {{tasks.todask.outputs.parameters.todask-scheduler}}
        "dependencies":
        - |-
          todask
        "name": |-
          splitter
        "template": |-
          splitter
      - "arguments":
          "parameters":
          - "name": |-
              todask-scheduler
            "value": |-
              {{tasks.todask.outputs.parameters.todask-scheduler}}
        "dependencies":
        - |-
          todask
        "name": |-
          summarize
        "template": |-
          summarize
      - "arguments":
          "parameters":
          - "name": |-
              acquire-airlines
            "value": |-
              {{tasks.acquire.outputs.parameters.acquire-airlines}}
        "dependencies":
        - |-
          acquire
        "name": |-
          todask
        "template": |-
          todask
      - "arguments":
          "parameters":
          - "name": |-
              todask-scheduler
            "value": |-
              {{tasks.todask.outputs.parameters.todask-scheduler}}
        "dependencies":
        - |-
          splitter
        - |-
          todask
        "name": |-
          xgb
        "template": |-
          xgb
    "name": |-
      my-dask-training-pipeline
  - "container":
      "command":
      - |-
        python
      - |-
        -m
      - |-
        mlrun
      - |-
        run
      - |-
        --kfp
      - |-
        --from-env
      - |-
        --workflow
      - |-
        {{workflow.uid}}
      - |-
        --name
      - |-
        splitter
      - |-
        -p
      - |-
        dask_key=airlines
      - |-
        -p
      - |-
        label_column=ArrDelay
      - |-
        -p
      - |-
        categories=['UniqueCarrier', 'Origin', 'Dest']
      - |-
        -p
      - |-
        target_path=/User/repos/demos/dask/artifacts
      - |-
        -i
      - |-
        dask_client={{inputs.parameters.todask-scheduler}}
      - |-
        -o
      - |-
        header
      - |-
        -o
      - |-
        test_set
      - |-
        --handler
      - |-
        splitter_labelencode
      - |-
        --runtime
      - |-
        {'kind': 'job', 'metadata': {'name': 'splitter-labelencode', 'hash': '1ebd9e166686c5cca960c0cf93b7371c0e9cd28f', 'project': 'default'}, 'spec': {'command': '/User/repos/demos/dask/code/splitter-labelencode.py', 'args': [], 'image': 'yjbds/mlrun-dask:dev', 'volumes': [{'flexVolume': {'driver': 'v3io/fuse', 'options': {'accessKey': 'e0f694b5-7dec-40fe-969e-86a8b9628c23', 'container': 'users', 'subPath': '/admin'}}, 'name': 'v3io'}], 'volume_mounts': [{'mountPath': '/User', 'name': 'v3io'}], 'env': [{'name': 'V3IO_API', 'value': 'v3io-webapi.default-tenant.svc:8081'}, {'name': 'V3IO_USERNAME', 'value': 'admin'}, {'name': 'V3IO_ACCESS_KEY', 'value': 'e0f694b5-7dec-40fe-969e-86a8b9628c23'}], 'description': '', 'build': {'image': 'yjbds/mlrun-dask:dev', 'commands': []}}}
      - |-
        --out-path
      - |-
        /User/repos/demos/dask/artifacts
      - |-
        --image
      - |-
        yjbds/mlrun-dask:dev
      - ""
      "env":
      - "name": |-
          MLRUN_DBPATH
        "value": |-
          http://mlrun-api:8080
      - "name": |-
          V3IO_API
        "value": |-
          v3io-webapi.default-tenant.svc:8081
      - "name": |-
          V3IO_USERNAME
        "value": |-
          admin
      - "name": |-
          V3IO_ACCESS_KEY
        "value": |-
          e0f694b5-7dec-40fe-969e-86a8b9628c23
      "image": |-
        yjbds/mlrun-dask:dev
      "volumeMounts":
      - "mountPath": |-
          /User
        "name": |-
          v3io
    "inputs":
      "parameters":
      - "name": |-
          todask-scheduler
    "name": |-
      splitter
    "outputs":
      "artifacts":
      - "name": |-
          mlpipeline-ui-metadata
        "path": |-
          /mlpipeline-ui-metadata.json
      - "name": |-
          mlpipeline-metrics
        "path": |-
          /mlpipeline-metrics.json
      - "name": |-
          splitter-header
        "path": |-
          /tmp/header
      - "name": |-
          splitter-test_set
        "path": |-
          /tmp/test_set
    "volumes":
    - "flexVolume":
        "driver": |-
          v3io/fuse
        "options":
          "accessKey": |-
            e0f694b5-7dec-40fe-969e-86a8b9628c23
          "container": |-
            users
          "subPath": |-
            /admin
      "name": |-
        v3io
  - "container":
      "command":
      - |-
        python
      - |-
        -m
      - |-
        mlrun
      - |-
        run
      - |-
        --kfp
      - |-
        --from-env
      - |-
        --workflow
      - |-
        {{workflow.uid}}
      - |-
        --name
      - |-
        summarize
      - |-
        -p
      - |-
        dask_key=airlines
      - |-
        -p
      - |-
        target_path=/User/repos/demos/dask/artifacts
      - |-
        -p
      - |-
        name=table-summary.csv
      - |-
        -p
      - |-
        key=table-summary
      - |-
        -i
      - |-
        dask_client={{inputs.parameters.todask-scheduler}}
      - |-
        -o
      - |-
        table-summary
      - |-
        --handler
      - |-
        table_summary
      - |-
        --runtime
      - |-
        {'kind': 'job', 'metadata': {'name': 'describe', 'hash': 'dc403635a9d553ec83302dbc7f8aa0baf29e7f6d', 'project': 'default'}, 'spec': {'command': '/User/repos/demos/dask/code/describe.py', 'args': [], 'image': 'yjbds/mlrun-dask:dev', 'volumes': [{'flexVolume': {'driver': 'v3io/fuse', 'options': {'accessKey': 'e0f694b5-7dec-40fe-969e-86a8b9628c23', 'container': 'users', 'subPath': '/admin'}}, 'name': 'v3io'}], 'volume_mounts': [{'mountPath': '/User', 'name': 'v3io'}], 'env': [{'name': 'V3IO_API', 'value': 'v3io-webapi.default-tenant.svc:8081'}, {'name': 'V3IO_USERNAME', 'value': 'admin'}, {'name': 'V3IO_ACCESS_KEY', 'value': 'e0f694b5-7dec-40fe-969e-86a8b9628c23'}], 'description': '', 'build': {'image': 'yjbds/mlrun-dask:dev', 'commands': []}}}
      - |-
        --image
      - |-
        yjbds/mlrun-dask:dev
      - ""
      "env":
      - "name": |-
          MLRUN_DBPATH
        "value": |-
          http://mlrun-api:8080
      - "name": |-
          V3IO_API
        "value": |-
          v3io-webapi.default-tenant.svc:8081
      - "name": |-
          V3IO_USERNAME
        "value": |-
          admin
      - "name": |-
          V3IO_ACCESS_KEY
        "value": |-
          e0f694b5-7dec-40fe-969e-86a8b9628c23
      "image": |-
        yjbds/mlrun-dask:dev
      "volumeMounts":
      - "mountPath": |-
          /User
        "name": |-
          v3io
    "inputs":
      "parameters":
      - "name": |-
          todask-scheduler
    "name": |-
      summarize
    "outputs":
      "artifacts":
      - "name": |-
          mlpipeline-ui-metadata
        "path": |-
          /mlpipeline-ui-metadata.json
      - "name": |-
          mlpipeline-metrics
        "path": |-
          /mlpipeline-metrics.json
      - "name": |-
          summarize-table-summary
        "path": |-
          /tmp/table-summary
    "volumes":
    - "flexVolume":
        "driver": |-
          v3io/fuse
        "options":
          "accessKey": |-
            e0f694b5-7dec-40fe-969e-86a8b9628c23
          "container": |-
            users
          "subPath": |-
            /admin
      "name": |-
        v3io
  - "container":
      "command":
      - |-
        python
      - |-
        -m
      - |-
        mlrun
      - |-
        run
      - |-
        --kfp
      - |-
        --from-env
      - |-
        --workflow
      - |-
        {{workflow.uid}}
      - |-
        --name
      - |-
        todask
      - |-
        -p
      - |-
        sample=0.005
      - |-
        -p
      - |-
        shards=8
      - |-
        -p
      - |-
        threads_per=8
      - |-
        -p
      - |-
        memory_limit=5GB
      - |-
        -p
      - |-
        dask_key=airlines
      - |-
        -p
      - |-
        target_path=/User/repos/demos/dask/artifacts
      - |-
        -i
      - |-
        parquet_url={{inputs.parameters.acquire-airlines}}
      - |-
        -o
      - |-
        scheduler
      - |-
        --handler
      - |-
        parquet_to_dask
      - |-
        --runtime
      - |-
        {'kind': 'dask', 'metadata': {'name': 'parquet-to-dask', 'hash': '88c6220390ffb07b7950a22eb792877ab0cecc2d', 'project': 'default'}, 'spec': {'command': '/User/repos/demos/dask/code/parquet-to-dask.py', 'args': [], 'image': 'yjbds/mlrun-dask:dev', 'volumes': [{'flexVolume': {'driver': 'v3io/fuse', 'options': {'accessKey': 'e0f694b5-7dec-40fe-969e-86a8b9628c23', 'container': 'users', 'subPath': '/admin'}}, 'name': 'v3io'}], 'volume_mounts': [{'mountPath': '/User', 'name': 'v3io'}], 'env': [{'name': 'V3IO_API', 'value': 'v3io-webapi.default-tenant.svc:8081'}, {'name': 'V3IO_USERNAME', 'value': 'admin'}, {'name': 'V3IO_ACCESS_KEY', 'value': 'e0f694b5-7dec-40fe-969e-86a8b9628c23'}], 'build': {'image': 'yjbds/mlrun-dask:dev', 'commands': []}, 'description': '', 'replicas': 8, 'image_pull_policy': 'Always', 'remote': True, 'service_type': 'NodePort', 'nthreads': 1, 'min_replicas': 0, 'max_replicas': 8}}
      - |-
        --out-path
      - |-
        /User/repos/demos/dask/artifacts
      - |-
        --image
      - |-
        yjbds/mlrun-dask:dev
      - ""
      "env":
      - "name": |-
          MLRUN_DBPATH
        "value": |-
          http://mlrun-api:8080
      - "name": |-
          V3IO_API
        "value": |-
          v3io-webapi.default-tenant.svc:8081
      - "name": |-
          V3IO_USERNAME
        "value": |-
          admin
      - "name": |-
          V3IO_ACCESS_KEY
        "value": |-
          e0f694b5-7dec-40fe-969e-86a8b9628c23
      "image": |-
        mlrun/dask:0.4.4
      "volumeMounts":
      - "mountPath": |-
          /User
        "name": |-
          v3io
    "inputs":
      "parameters":
      - "name": |-
          acquire-airlines
    "name": |-
      todask
    "outputs":
      "artifacts":
      - "name": |-
          mlpipeline-ui-metadata
        "path": |-
          /mlpipeline-ui-metadata.json
      - "name": |-
          mlpipeline-metrics
        "path": |-
          /mlpipeline-metrics.json
      - "name": |-
          todask-scheduler
        "path": |-
          /tmp/scheduler
      "parameters":
      - "name": |-
          todask-scheduler
        "valueFrom":
          "path": |-
            /tmp/scheduler
    "volumes":
    - "flexVolume":
        "driver": |-
          v3io/fuse
        "options":
          "accessKey": |-
            e0f694b5-7dec-40fe-969e-86a8b9628c23
          "container": |-
            users
          "subPath": |-
            /admin
      "name": |-
        v3io
  - "container":
      "command":
      - |-
        python
      - |-
        -m
      - |-
        mlrun
      - |-
        run
      - |-
        --kfp
      - |-
        --from-env
      - |-
        --workflow
      - |-
        {{workflow.uid}}
      - |-
        --name
      - |-
        xgb
      - |-
        -p
      - |-
        train_set=('xtrain', 'ytrain')
      - |-
        -p
      - |-
        valid_set=('xvalid', 'yvalid')
      - |-
        -p
      - |-
        target_path=/User/repos/demos/dask/artifacts
      - |-
        -p
      - |-
        name=xgb-model.pkl
      - |-
        -p
      - |-
        key=xgb-model
      - |-
        -p
      - |-
        params={'max_depth': 3, 'num_boost_round': 3, 'eta': 1, 'objective': 'binary:logistic', 'eval_metric': ['auc', 'ams@0'], 'evals': [('xvalid', 'yvalid')], 'silent': False, 'verbose_eval': True}
      - |-
        -i
      - |-
        dask_client={{inputs.parameters.todask-scheduler}}
      - |-
        -o
      - |-
        xgb-model
      - |-
        --handler
      - |-
        clf_xgboost_dask
      - |-
        --runtime
      - |-
        {'kind': 'job', 'metadata': {'name': 'clf_xgboost_dask', 'hash': 'cca27d04c2153c6c9dfdce2c366201d3df0f67c4', 'project': 'default'}, 'spec': {'command': '/User/repos/demos/dask/code/clf_xgboost_dask.py', 'args': [], 'image': 'yjbds/mlrun-dask:dev', 'volumes': [{'flexVolume': {'driver': 'v3io/fuse', 'options': {'accessKey': 'e0f694b5-7dec-40fe-969e-86a8b9628c23', 'container': 'users', 'subPath': '/admin'}}, 'name': 'v3io'}], 'volume_mounts': [{'mountPath': '/User', 'name': 'v3io'}], 'env': [{'name': 'V3IO_API', 'value': 'v3io-webapi.default-tenant.svc:8081'}, {'name': 'V3IO_USERNAME', 'value': 'admin'}, {'name': 'V3IO_ACCESS_KEY', 'value': 'e0f694b5-7dec-40fe-969e-86a8b9628c23'}], 'description': '', 'build': {'image': 'yjbds/mlrun-dask:dev', 'commands': []}}}
      - |-
        --out-path
      - |-
        /User/repos/demos/dask/artifacts
      - |-
        --image
      - |-
        yjbds/mlrun-dask:dev
      - ""
      "env":
      - "name": |-
          MLRUN_DBPATH
        "value": |-
          http://mlrun-api:8080
      - "name": |-
          V3IO_API
        "value": |-
          v3io-webapi.default-tenant.svc:8081
      - "name": |-
          V3IO_USERNAME
        "value": |-
          admin
      - "name": |-
          V3IO_ACCESS_KEY
        "value": |-
          e0f694b5-7dec-40fe-969e-86a8b9628c23
      "image": |-
        yjbds/mlrun-dask:dev
      "volumeMounts":
      - "mountPath": |-
          /User
        "name": |-
          v3io
    "inputs":
      "parameters":
      - "name": |-
          todask-scheduler
    "name": |-
      xgb
    "outputs":
      "artifacts":
      - "name": |-
          mlpipeline-ui-metadata
        "path": |-
          /mlpipeline-ui-metadata.json
      - "name": |-
          mlpipeline-metrics
        "path": |-
          /mlpipeline-metrics.json
      - "name": |-
          xgb-xgb-model
        "path": |-
          /tmp/xgb-model
    "volumes":
    - "flexVolume":
        "driver": |-
          v3io/fuse
        "options":
          "accessKey": |-
            e0f694b5-7dec-40fe-969e-86a8b9628c23
          "container": |-
            users
          "subPath": |-
            /admin
      "name": |-
        v3io
